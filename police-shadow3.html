<meta charset="UTF-8">

<!--
######### ######### #########
######### ######### #########
###       ###       ###      
###       ######### #########
###       ######### #########
###             ###       ###
######### ######### #########
######### ######### #########
-->

<style>
	:root
	{
		--blur-size:5px;
		--shadow-blue:	-1px -1px var(--blur-size) blue,
						 1px -1px var(--blur-size) blue,
						-1px  1px var(--blur-size) blue,
						 1px  1px var(--blur-size) blue;
		--shadow-red:	-1px -1px var(--blur-size) red,  
						 1px -1px var(--blur-size) red,
						-1px  1px var(--blur-size) red,
						 1px  1px var(--blur-size) red;
		--shadow-amber: -1px -1px var(--blur-size) orange,  
						 1px -1px var(--blur-size) orange,
						-1px  1px var(--blur-size) orange,
						 1px  1px var(--blur-size) orange;
	}
	
	body
	{
		background-color:black;
		color:white;
		font-family:arial;
	}
	
	.flex-hor
	{
		display:flex;
			justify-content:space-around;
			flex-direction:row;
			
	}

	/*############################################*/
	
	.panel
	{
		height:10em;
	
		background-color:gray;
		color:white;
		
		font-family:monospace;
		font-weight:bold;
		text-align:center;
		
		border:solid #333 10px;
		border-radius:10%;
		padding:15px;
	}
	
	.panel button
	{
		width:2em;
		height:2em;
		border-width:4px;
		border-radius:4px;
		padding:0;
	}
	
	.panel button:disabled
	{
		color:#aaa;
	}
	
	#view
	{
		width:18em;
		width:50%;
	}
	
	/*############################################*/

	.leo
	{
		font-family:impact;
		font-weight:lighter;
		font-size:1.2em;
		animation-duration:0.8s;
		animation-iteration-count:infinite;
	}
	
	.leo-pulse { animation-name:shadow-pulse; }
	.leo-dual { animation-name:shadow-dual; }
	.leo-amber { animation-name:shadow-amber; }
	.leo-tri { animation-name:shadow-tri; }
	.leo-off { animation-name:shadow-off; }
</style>

<!--
######### ###   ### ### ###   ###
######### ####  ### ### #### ####
###   ### ##### ### ### #########
######### ######### ### ### # ###
######### ### ##### ### ###   ###
###   ### ###  #### ### ###   ###
###   ### ###   ### ### ###   ###
###   ### ###   ### ### ###   ###
-->

<style>
	@keyframes shadow-off
	{
		from { text-shadow:none; }
		to   { text-shadow:none; }
	}
	@keyframes shadow-pulse
	{
		0%	{ text-shadow: var(--shadow-blue); }
		49%	{ text-shadow: var(--shadow-blue); }
		50% { text-shadow: var(--shadow-red); }
		100%{ text-shadow: var(--shadow-red); }
	}
	@keyframes shadow-dual
	{
		0%	{ text-shadow: var(--shadow-blue); }
		11%	{ text-shadow: var(--shadow-blue); }
		
		12% { text-shadow:none; }
		14% { text-shadow:none; }
		
		15%	{ text-shadow: var(--shadow-red); }
		26%	{ text-shadow: var(--shadow-red); }
		
		27% { text-shadow:none; }
		49% { text-shadow:none; }
		
		50%	{ text-shadow: var(--shadow-red); }
		61%	{ text-shadow: var(--shadow-red); }
		
		62% { text-shadow:none; }
		64% { text-shadow:none; }
		
		65%	{ text-shadow: var(--shadow-blue); }
		76%	{ text-shadow: var(--shadow-blue); }
		
		77% { text-shadow:none; }
		100%{ text-shadow:none; }
	}
	@keyframes shadow-amber
	{
		0%	{ text-shadow: var(--shadow-amber); }
		74%	{ text-shadow: var(--shadow-amber); }
		75% { text-shadow:none; }
		100%{ text-shadow:none; }
	}
	@keyframes shadow-tri
	{
		0%	{ text-shadow: var(--shadow-blue); }
		12%	{ text-shadow: var(--shadow-blue); }

		13% { text-shadow: var(--shadow-red); }
		24% { text-shadow: var(--shadow-red); }

		25% { text-shadow: var(--shadow-blue); }
		37% { text-shadow: var(--shadow-blue); }

		38% { text-shadow:none; }
		49% { text-shadow:none; }

		50%	{ text-shadow: var(--shadow-red); }
		62%	{ text-shadow: var(--shadow-red); }

		63% { text-shadow: var(--shadow-blue); }
		74% { text-shadow: var(--shadow-blue); }

		75% { text-shadow: var(--shadow-red); }
		87% { text-shadow: var(--shadow-red); }

		88% { text-shadow:none; }
		100%{ text-shadow:none; }
	}
</style>

<!--
###   ### ######### ###   ### ###
###   ### ######### #### #### ###
###   ###    ###    ######### ###
#########    ###    ### # ### ###
#########    ###    ###   ### ###
###   ###    ###    ###   ### ###
###   ###    ###    ###   ### #########
###   ###    ###    ###   ### #########
-->

<div class="flex-hor">
	<div id="view" class="leo leo-off">
		<span id="fx-name" style="float:right;">-</span>
		<br>
		<pre id="custom" class="leo"></pre>
		<br><br>
		<hr>
		<br>
		<textarea id="custom-in" onchange="setCustom()" cols="40" rows="10">LEO-FX text&#13;&#10;woop woop&#13;&#10;it's the Lolice, you're under arrest!&#13;&#10;Maritime RP: You've been jailed for #N seconds&#13;&#10;&#13;&#10;911: what's your emergency?</textarea>
	</div>
	
	<div class="panel">
		- CONTROL PANEL -
		<br>
		<button onclick="size(1)">+</button>
		<button onclick="mode('pulse')">1</button>
		<button onclick="mode('dual')">2</button>
		<button onclick="mode('tri')">3</button>
		<br>
		<button onclick="size(-1)">-</button>
		<button disabled>4</button>
		<button disabled>5</button>
		<button disabled>6</button>
		<br>
		<button disabled>.</button>
		<button disabled>7</button>
		<button disabled>8</button>
		<button onclick="mode('amber')">9</button>
		<br>
		<button disabled>.</button>
		<button onclick="light()">L</button>
		<button onclick="power()">0</button>
		<button disabled>F</button>
	</div>
	
<!--
######### #########
######### #########
   ###    ###
   ###    #########
   ###    #########
   ###          ###
######    #########
######    #########
-->

	<script>
		const f_dev=true;
		console.log("dev-logs="+f_dev);

		var polText = document.getElementById("view");
		var fxName = document.getElementById("fx-name");
		var fx_mem = "- pulse -";
		
		var custom_in = document.getElementById("custom-in");
		var custom_out = document.getElementById("custom");

		custom_out.innerHTML = custom_in.innerHTML;

		var fxSize = px2num( getStyleVar("--blur-size") );

		log("init vars check");

		/* --- --- --- FUNCS --- --- --- */
		
		function power()
		{
			if( polText.classList.contains("leo-off") )
			{
				log("power(on)");
				polText.classList.remove("leo-off");
				fxName.innerHTML = fx_mem;
			}
			else
			{
				log("power(off)");
				polText.classList.add("leo-off");
				fx_mem = fxName.innerHTML;
				fxName.innerHTML="-";
			}
		}

		function light()
		{
			if( polText.style.color=="black" )
			{
				log("light(on)");
				polText.style.color="white";
			}
			else
			{
				log("light(off)");
				polText.style.color="black";
			}
		}
		
		function mode(id)
		{
			log("id="+id);
			fx_mem = "- "+id+" -";
			fxName.innerHTML=fx_mem;
			polText.className = "leo leo-"+id;
		}

		function size(q)
		{
			log("size("+q+")");
			if( fxSize+q > 0 )
			{
				setSize( fxSize + q );
				fxSize = fxSize + q;
			}
			log("size="+fxSize);
		}

		function setCustom()
		{ custom_out.innerHTML = custom_in.value; }

		log("init funcs check");

		/* --- --- --- CONSOLE / INTERNAL USE --- --- --- */

		function log(obj) { if( f_dev ) { console.log(obj); } }
		function setSpeed(speed)
		{
			if(speed==null) { speed="0.8"; } // default if empty
			document.getElementById("view").style="animation-duration:"+speed+"s;";
			return ".view{ animation-duration:"+speed+"s; }"; // feedback
		}

		function setSize(size)
		{
			if(size==null){size=5;} // default if empty
			document.documentElement.style.setProperty("--blur-size",size+"px");
			return ":root{--blur-size:"+size+"px;}"; // feedback
		}

		function getStyleVar(varName)
		{ return getComputedStyle(document.documentElement).getPropertyValue(varName); }

		function px2num(value)
		{ return value.replace("px","")*1; }

	</script>
</div>